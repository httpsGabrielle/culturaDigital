{% extends 'dashboard.html' %}
{% load crispy_forms_tags %}
{% load static %}

{% block 'content-escolas' %}  
<div class="container-fluid px-5">
    <div class="container-fluid  rounded">
        <div class="row headerschool">
            <div class="col-5 px-5 text-white d-flex justify-content-center flex-column">
                <h2 class="fw-bold">Bem-vindo(a)!</h2>
                <p>Essa é a área administrativa, acesso restrito para Administradores! Liste e adicione novos usuários.</p>
            </div>
            <div class="col"><img src="{% static 'img/images/school_header.png' %}" class="img-fluid" alt="..."></div>
        </div>
    </div>

    <div class="d-flex justify-content-between mt-3 px-3">
        <h2>Escolas</h2>
        <button type="button" class="btn btn-green text-white" data-bs-toggle="modal" data-bs-target="#createUsuario"><span class="material-symbols-outlined align-middle pe-1">add</span>Adicionar</button>
    </div>

    <div class="container-fluid d-flex flex-wrap">
    {% for user in users %}
        <div class="card m-3" style="width: 18rem;">
            <div class="card-body">
                <div class=" d-flex justify-content-between align-items-center">
                    <h5 class="fw-bold">{{user.get_username}}</h5>
                    <button type="button" class="btn"><span class="material-symbols-outlined text-secondary">edit</span></button>
                </div>
                <p class="card-text text-gray py-3">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
                <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                    <a href="{% url 'deleteUser' user.id %}"><button class="btn btn-danger" type="button"  data-bs-toggle="modal" data-bs-target="#deleteModal">Deletar</button></a>
                </div>
            </div>
        </div>
    {% endfor %}
    </div>
</div>  

{% block 'modalDelete' %} 
{% endblock %}


<div class="modal fade" id="createUsuario" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="staticBackdropLabel">Cadastrar</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body"> 
            <form action="" method="POST">
                {% csrf_token %}
                {{ form|crispy }}
                {% if form.errors %}
                <div class="alert alert-danger" role="alert">
                  Login ou senha invalidos!
                </div>
                {% endif %}
                <div class="d-grid gap-2">
                    <button type="submit" value="Submit" class="btn btn-success">Salvar</button>
                  </div>              
            </form>
        </div>
      </div>
    </div>
  </div>

{% endblock %}
